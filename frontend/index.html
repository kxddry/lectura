<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lectura - AI-Powered Learning Enhancement</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        :root {
            --primary: #6d28d9;
            --primary-dark: #5b21b6;
            --secondary: #10b981;
            --dark: #0f172a;
            --darker: #020617;
            --light: #f8fafc;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--darker);
            color: var(--light);
            min-height: 100vh;
        }

        .gradient-text {
            background: linear-gradient(90deg, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .slide-fade-enter-active {
            transition: all 0.3s ease-out;
        }

        .slide-fade-leave-active {
            transition: all 0.3s cubic-bezier(1, 0.5, 0.8, 1);
        }

        .slide-fade-enter-from,
        .slide-fade-leave-to {
            transform: translateY(20px);
            opacity: 0;
        }

        .pulse-animation {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(109, 40, 217, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(109, 40, 217, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(109, 40, 217, 0);
            }
        }

        .file-upload-container {
            border: 2px dashed #334155;
            transition: all 0.3s ease;
        }

        .file-upload-container:hover {
            border-color: var(--primary);
            background-color: rgba(109, 40, 217, 0.05);
        }

        .file-upload-container.dragover {
            border-color: var(--secondary);
            background-color: rgba(16, 185, 129, 0.05);
        }

        .status-badge {
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .status-0 {
            background-color: rgba(251, 191, 36, 0.1);
            color: #f59e0b;
        }

        .status-1 {
            background-color: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }

        .status-2 {
            background-color: rgba(16, 185, 129, 0.1);
            color: #10b981;
        }

        .loading-spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        .glow-effect {
            position: relative;
        }

        .glow-effect::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(109, 40, 217, 0.3) 0%, transparent 70%);
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .glow-effect:hover::after {
            opacity: 1;
        }
    </style>
</head>
<body>
<div id="app" class="min-h-screen flex flex-col">
    <!-- Navigation -->
    <nav class="bg-gray-900 border-b border-gray-800 py-4 px-6 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <div class="w-8 h-8 rounded-full bg-gradient-to-r from-purple-600 to-pink-500 flex items-center justify-center">
                    <i class="fas fa-brain text-white"></i>
                </div>
                <span class="text-xl font-bold gradient-text">Lectura</span>
            </div>

            <div class="hidden md:flex items-center space-x-6">
                <a href="#" @click="currentView = 'dashboard'" class="hover:text-purple-400 transition-colors" :class="{'text-purple-400': currentView === 'dashboard'}">Dashboard</a>
                <a href="#" @click="currentView = 'files'" class="hover:text-purple-400 transition-colors" :class="{'text-purple-400': currentView === 'files'}">My Files</a>
                <a href="#" class="hover:text-purple-400 transition-colors">Pricing</a>
                <a href="#" class="hover:text-purple-400 transition-colors">Support</a>
            </div>

            <div class="flex items-center space-x-4">
                <template v-if="isAuthenticated">
                    <button @click="logout" class="px-4 py-2 rounded-md bg-gray-800 hover:bg-gray-700 transition-colors text-sm font-medium">
                        Logout
                    </button>
                </template>
                <template v-else>
                    <button @click="currentView = 'login'" class="px-4 py-2 rounded-md bg-gray-800 hover:bg-gray-700 transition-colors text-sm font-medium">
                        Login
                    </button>
                    <button @click="currentView = 'register'" class="px-4 py-2 rounded-md bg-gradient-to-r from-purple-600 to-pink-500 hover:from-purple-700 hover:to-pink-600 transition-colors text-sm font-medium">
                        Get Started
                    </button>
                </template>
                <button class="md:hidden text-gray-400 hover:text-white">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow">
        <transition name="slide-fade" mode="out-in">
            <!-- Dashboard View -->
            <div v-if="currentView === 'dashboard' && isAuthenticated" key="dashboard" class="max-w-7xl mx-auto px-6 py-12">
                <div class="text-center mb-12">
                    <h1 class="text-4xl md:text-5xl font-bold mb-4">Enhance Your <span class="gradient-text">Learning Power</span></h1>
                    <p class="text-lg text-gray-400 max-w-2xl mx-auto">
                        Upload your lectures and get AI-powered summaries to help you learn faster and retain more information.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                    <div class="bg-gray-900 rounded-xl p-6 border border-gray-800 hover:border-purple-500 transition-colors">
                        <div class="w-12 h-12 rounded-full bg-purple-900 flex items-center justify-center mb-4">
                            <i class="fas fa-upload text-purple-400"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Upload</h3>
                        <p class="text-gray-400">Upload your lecture videos or audio files in any format.</p>
                    </div>
                    <div class="bg-gray-900 rounded-xl p-6 border border-gray-800 hover:border-blue-500 transition-colors">
                        <div class="w-12 h-12 rounded-full bg-blue-900 flex items-center justify-center mb-4">
                            <i class="fas fa-headphones text-blue-400"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Transcribe</h3>
                        <p class="text-gray-400">Our AI automatically transcribes your content with high accuracy.</p>
                    </div>
                    <div class="bg-gray-900 rounded-xl p-6 border border-gray-800 hover:border-green-500 transition-colors">
                        <div class="w-12 h-12 rounded-full bg-green-900 flex items-center justify-center mb-4">
                            <i class="fas fa-file-alt text-green-400"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Summarize</h3>
                        <p class="text-gray-400">Get concise summaries highlighting key concepts and takeaways.</p>
                    </div>
                </div>

                <div class="bg-gray-900 rounded-xl p-8 border border-gray-800">
                    <div class="flex flex-col md:flex-row items-center justify-between mb-6">
                        <h2 class="text-2xl font-bold mb-4 md:mb-0">Upload New Lecture</h2>
                        <div class="flex space-x-2">
                            <button @click="showVideoForm = true" class="px-4 py-2 rounded-md bg-gray-800 hover:bg-gray-700 transition-colors text-sm font-medium" :class="{'bg-purple-900 text-purple-400': showVideoForm}">
                                <i class="fas fa-video mr-2"></i> Video
                            </button>
                            <button @click="showVideoForm = false" class="px-4 py-2 rounded-md bg-gray-800 hover:bg-gray-700 transition-colors text-sm font-medium" :class="{'bg-purple-900 text-purple-400': !showVideoForm}">
                                <i class="fas fa-microphone mr-2"></i> Audio
                            </button>
                        </div>
                    </div>

                    <div @dragover.prevent="isDragging = true"
                         @dragleave.prevent="isDragging = false"
                         @drop.prevent="handleDrop"
                         :class="{'file-upload-container dragover': isDragging, 'file-upload-container': !isDragging}"
                         class="rounded-lg p-8 text-center cursor-pointer transition-all duration-300 mb-6">
                        <input type="file" ref="fileInput" @change="handleFileSelect" class="hidden" accept="video/*,audio/*">

                        <div class="flex flex-col items-center justify-center space-y-4">
                            <div class="w-16 h-16 rounded-full bg-purple-900 flex items-center justify-center pulse-animation">
                                <i class="fas fa-cloud-upload-alt text-2xl text-purple-400"></i>
                            </div>
                            <h3 class="text-xl font-semibold">
                                <span v-if="!isDragging">Drag & Drop your {{ showVideoForm ? 'video' : 'audio' }} here</span>
                                <span v-else class="text-purple-400">Drop to upload</span>
                            </h3>
                            <p class="text-gray-400">or <span class="text-purple-400 cursor-pointer" @click="triggerFileInput">click to browse</span></p>
                            <p class="text-sm text-gray-500">Supports: {{ showVideoForm ? 'MP4, MOV, AVI, etc.' : 'MP3, WAV, M4A, etc.' }} (Max 2GB)</p>
                        </div>
                    </div>

                    <div v-if="selectedFile" class="bg-gray-800 rounded-lg p-4 flex items-center justify-between mb-6">
                        <div class="flex items-center space-x-3">
                            <i class="fas" :class="showVideoForm ? 'fa-video text-purple-400' : 'fa-microphone text-blue-400'"></i>
                            <div>
                                <p class="font-medium">{{ selectedFile.name }}</p>
                                <p class="text-sm text-gray-400">{{ formatFileSize(selectedFile.size) }}</p>
                            </div>
                        </div>
                        <button @click="removeFile" class="text-gray-400 hover:text-red-400">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>

                    <div class="flex justify-end">
                        <button @click="uploadFile" :disabled="!selectedFile || isUploading" class="px-6 py-3 rounded-md bg-gradient-to-r from-purple-600 to-pink-500 hover:from-purple-700 hover:to-pink-600 transition-colors font-medium flex items-center" :class="{'opacity-50 cursor-not-allowed': !selectedFile || isUploading}">
                            <span v-if="!isUploading">Upload Lecture</span>
                            <span v-else>Uploading...</span>
                            <i v-if="isUploading" class="fas fa-circle-notch loading-spinner ml-2"></i>
                            <i v-else class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Files View -->
            <div v-else-if="currentView === 'files' && isAuthenticated" key="files" class="max-w-7xl mx-auto px-6 py-12">
                <div class="flex flex-col md:flex-row items-start md:items-center justify-between mb-8">
                    <h1 class="text-3xl font-bold mb-4 md:mb-0">My Lecture Files</h1>
                    <div class="flex space-x-3">
                        <div class="relative">
                            <select v-model="filterStatus" class="appearance-none bg-gray-900 border border-gray-700 rounded-md pl-4 pr-8 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="all">All Statuses</option>
                                <option value="0">Uploaded</option>
                                <option value="1">Transcribed</option>
                                <option value="2">Summarized</option>
                            </select>
                            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                                <i class="fas fa-chevron-down text-xs"></i>
                            </div>
                        </div>
                        <button @click="refreshFiles" class="px-4 py-2 rounded-md bg-gray-800 hover:bg-gray-700 transition-colors text-sm font-medium flex items-center">
                            <i class="fas fa-sync-alt mr-2" :class="{'loading-spinner': isRefreshing}"></i>
                            Refresh
                        </button>
                    </div>
                </div>

                <div v-if="isLoadingFiles" class="flex justify-center items-center py-12">
                    <div class="animate-pulse flex flex-col items-center">
                        <i class="fas fa-circle-notch loading-spinner text-4xl text-purple-400 mb-4"></i>
                        <p class="text-gray-400">Loading your files...</p>
                    </div>
                </div>

                <div v-else>
                    <div v-if="filteredFiles.length === 0" class="bg-gray-900 rounded-xl p-12 text-center border border-dashed border-gray-800">
                        <div class="w-20 h-20 rounded-full bg-gray-800 flex items-center justify-center mx-auto mb-6">
                            <i class="fas fa-folder-open text-3xl text-gray-600"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">No files found</h3>
                        <p class="text-gray-400 mb-6">Upload your first lecture to get started</p>
                        <button @click="currentView = 'dashboard'" class="px-6 py-2 rounded-md bg-gradient-to-r from-purple-600 to-pink-500 hover:from-purple-700 hover:to-pink-600 transition-colors font-medium">
                            Upload Lecture
                        </button>
                    </div>

                    <div v-else class="bg-gray-900 rounded-xl border border-gray-800 overflow-hidden">
                        <div class="grid grid-cols-12 bg-gray-800 px-6 py-3 border-b border-gray-700 text-sm text-gray-400 font-medium">
                            <div class="col-span-5 md:col-span-6">Name</div>
                            <div class="col-span-3 md:col-span-2">Type</div>
                            <div class="col-span-2 md:col-span-2">Status</div>
                            <div class="col-span-2 text-right">Actions</div>
                        </div>

                        <div v-for="file in filteredFiles" :key="file.uuid" class="grid grid-cols-12 px-6 py-4 border-b border-gray-800 hover:bg-gray-800/50 transition-colors">
                            <div class="col-span-5 md:col-span-6 flex items-center space-x-3">
                                <i class="fas" :class="getFileIcon(file.mime_type)"></i>
                                <span class="truncate">{{ file.name }}</span>
                            </div>
                            <div class="col-span-3 md:col-span-2 flex items-center text-sm text-gray-400">
                                {{ getFileType(file.mime_type) }}
                            </div>
                            <div class="col-span-2 md:col-span-2 flex items-center">
                                    <span class="status-badge" :class="'status-' + file.status">
                                        {{ getStatusText(file.status) }}
                                    </span>
                            </div>
                            <div class="col-span-2 flex justify-end space-x-2">
                                <button v-if="file.status === 2" @click="viewSummary(file)" class="w-8 h-8 rounded-full bg-gray-700 hover:bg-purple-600 transition-colors flex items-center justify-center text-sm" title="View Summary">
                                    <i class="fas fa-file-alt"></i>
                                </button>
                                <a :href="file.url" target="_blank" class="w-8 h-8 rounded-full bg-gray-700 hover:bg-blue-600 transition-colors flex items-center justify-center text-sm" title="Download">
                                    <i class="fas fa-download"></i>
                                </a>
                                <button @click="deleteFile(file.uuid)" class="w-8 h-8 rounded-full bg-gray-700 hover:bg-red-600 transition-colors flex items-center justify-center text-sm" title="Delete">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Login View -->
            <div v-else-if="currentView === 'login'" key="login" class="max-w-md mx-auto px-6 py-16">
                <div class="bg-gray-900 rounded-xl p-8 border border-gray-800">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 rounded-full bg-gradient-to-r from-purple-600 to-pink-500 flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-brain text-2xl text-white"></i>
                        </div>
                        <h1 class="text-2xl font-bold mb-2">Welcome back</h1>
                        <p class="text-gray-400">Sign in to your Lectura account</p>
                    </div>

                    <form @submit.prevent="handleLogin" class="space-y-6">
                        <div>
                            <label for="login-email" class="block text-sm font-medium text-gray-300 mb-1">Email</label>
                            <input v-model="loginForm.email" type="email" id="login-email" required class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors" placeholder="your@email.com">
                        </div>

                        <div>
                            <label for="login-password" class="block text-sm font-medium text-gray-300 mb-1">Password</label>
                            <input v-model="loginForm.password" type="password" id="login-password" required class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors" placeholder="••••••••">
                        </div>

                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <input v-model="loginForm.remember" type="checkbox" id="remember-me" class="h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-600 rounded bg-gray-700">
                                <label for="remember-me" class="ml-2 block text-sm text-gray-300">Remember me</label>
                            </div>
                            <a href="#" class="text-sm text-purple-400 hover:text-purple-300">Forgot password?</a>
                        </div>

                        <button type="submit" :disabled="isLoggingIn" class="w-full px-6 py-3 rounded-md bg-gradient-to-r from-purple-600 to-pink-500 hover:from-purple-700 hover:to-pink-600 transition-colors font-medium flex items-center justify-center" :class="{'opacity-50 cursor-not-allowed': isLoggingIn}">
                            <span v-if="!isLoggingIn">Sign In</span>
                            <span v-else>Signing In...</span>
                            <i v-if="isLoggingIn" class="fas fa-circle-notch loading-spinner ml-2"></i>
                        </button>
                    </form>

                    <div class="mt-6 text-center text-sm text-gray-400">
                        Don't have an account? <a href="#" @click="currentView = 'register'" class="text-purple-400 hover:text-purple-300">Sign up</a>
                    </div>
                </div>
            </div>

            <!-- Register View -->
            <div v-else-if="currentView === 'register'" key="register" class="max-w-md mx-auto px-6 py-16">
                <div class="bg-gray-900 rounded-xl p-8 border border-gray-800">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 rounded-full bg-gradient-to-r from-purple-600 to-pink-500 flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-brain text-2xl text-white"></i>
                        </div>
                        <h1 class="text-2xl font-bold mb-2">Create your account</h1>
                        <p class="text-gray-400">Start enhancing your learning today</p>
                    </div>

                    <form @submit.prevent="handleRegister" class="space-y-6">
                        <div>
                            <label for="register-email" class="block text-sm font-medium text-gray-300 mb-1">Email</label>
                            <input v-model="registerForm.email" type="email" id="register-email" required class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors" placeholder="your@email.com">
                        </div>

                        <div>
                            <label for="register-password" class="block text-sm font-medium text-gray-300 mb-1">Password</label>
                            <input v-model="registerForm.password" type="password" id="register-password" required class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors" placeholder="••••••••">
                            <p class="mt-1 text-xs text-gray-500">At least 8 characters</p>
                        </div>

                        <div>
                            <label for="register-confirm-password" class="block text-sm font-medium text-gray-300 mb-1">Confirm Password</label>
                            <input v-model="registerForm.confirmPassword" type="password" id="register-confirm-password" required class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors" placeholder="••••••••">
                        </div>

                        <div class="flex items-center">
                            <input v-model="registerForm.agreeTerms" type="checkbox" id="agree-terms" required class="h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-600 rounded bg-gray-700">
                            <label for="agree-terms" class="ml-2 block text-sm text-gray-300">
                                I agree to the <a href="#" class="text-purple-400 hover:text-purple-300">Terms of Service</a> and <a href="#" class="text-purple-400 hover:text-purple-300">Privacy Policy</a>
                            </label>
                        </div>

                        <button type="submit" :disabled="isRegistering" class="w-full px-6 py-3 rounded-md bg-gradient-to-r from-purple-600 to-pink-500 hover:from-purple-700 hover:to-pink-600 transition-colors font-medium flex items-center justify-center" :class="{'opacity-50 cursor-not-allowed': isRegistering}">
                            <span v-if="!isRegistering">Create Account</span>
                            <span v-else>Creating Account...</span>
                            <i v-if="isRegistering" class="fas fa-circle-notch loading-spinner ml-2"></i>
                        </button>
                    </form>

                    <div class="mt-6 text-center text-sm text-gray-400">
                        Already have an account? <a href="#" @click="currentView = 'login'" class="text-purple-400 hover:text-purple-300">Sign in</a>
                    </div>
                </div>
            </div>

            <!-- Summary Modal -->
            <div v-if="showSummaryModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 px-4 py-6">
                <div class="bg-gray-900 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col border border-gray-800">
                    <div class="flex items-center justify-between px-6 py-4 border-b border-gray-800">
                        <h3 class="text-lg font-semibold">{{ currentSummaryFile.name }}</h3>
                        <button @click="showSummaryModal = false" class="text-gray-400 hover:text-white">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>

                    <div class="flex-grow overflow-y-auto p-6">
                        <div v-if="isLoadingSummary" class="flex justify-center items-center h-64">
                            <div class="animate-pulse flex flex-col items-center">
                                <i class="fas fa-circle-notch loading-spinner text-3xl text-purple-400 mb-4"></i>
                                <p class="text-gray-400">Generating summary...</p>
                            </div>
                        </div>

                        <div v-else class="prose prose-invert max-w-none">
                            <h3 class="text-xl font-semibold mb-4">AI-Generated Summary</h3>

                            <div class="bg-gray-800 rounded-lg p-4 mb-6">
                                <h4 class="font-medium text-purple-400 mb-2">Key Takeaways</h4>
                                <ul class="list-disc pl-5 space-y-1">
                                    <li>The lecture covers the fundamental principles of quantum mechanics</li>
                                    <li>Wave-particle duality is a core concept that explains behavior at atomic scales</li>
                                    <li>Heisenberg's uncertainty principle limits precision in measuring certain pairs of properties</li>
                                    <li>Quantum superposition allows particles to exist in multiple states simultaneously</li>
                                </ul>
                            </div>

                            <div class="mb-6">
                                <h4 class="font-medium text-purple-400 mb-2">Detailed Summary</h4>
                                <p class="mb-4">The lecture begins with an introduction to quantum mechanics, contrasting it with classical physics. The professor explains how quantum mechanics describes nature at the smallest scales of energy levels of atoms and subatomic particles.</p>

                                <p class="mb-4">A significant portion focuses on wave-particle duality, demonstrating how light and matter can exhibit properties of both waves and particles. The double-slit experiment is discussed as a key demonstration of this phenomenon.</p>

                                <p class="mb-4">The lecture then moves to Heisenberg's uncertainty principle, mathematically expressing a fundamental limit to the precision with which certain pairs of physical properties can be known. This leads to a discussion about the probabilistic nature of quantum mechanics.</p>

                                <p>Finally, quantum superposition is introduced, with examples showing how quantum systems can exist in multiple states simultaneously until measured. The professor relates this to modern applications like quantum computing.</p>
                            </div>

                            <div class="bg-gray-800 rounded-lg p-4">
                                <h4 class="font-medium text-purple-400 mb-2">Recommended Study Materials</h4>
                                <ul class="list-disc pl-5 space-y-1">
                                    <li>"Principles of Quantum Mechanics" by R. Shankar (Chapter 1-3)</li>
                                    <li>"Quantum Physics for Dummies" by Steven Holzner</li>
                                    <li>MIT OpenCourseWare: 8.04 Quantum Physics I</li>
                                    <li>Feynman Lectures on Physics, Volume III</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="px-6 py-4 border-t border-gray-800 flex justify-end">
                        <button @click="showSummaryModal = false" class="px-4 py-2 rounded-md bg-gray-800 hover:bg-gray-700 transition-colors text-sm font-medium">
                            Close
                        </button>
                    </div>
                </div>
            </div>
        </transition>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 border-t border-gray-800 py-8 px-6">
        <div class="max-w-7xl mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <div class="w-8 h-8 rounded-full bg-gradient-to-r from-purple-600 to-pink-500 flex items-center justify-center">
                            <i class="fas fa-brain text-white"></i>
                        </div>
                        <span class="text-xl font-bold gradient-text">Lectura</span>
                    </div>
                    <p class="text-gray-400 text-sm">Enhancing the learning power of millions through AI-powered lecture summarization.</p>
                </div>

                <div>
                    <h3 class="text-sm font-semibold uppercase tracking-wider text-gray-300 mb-4">Product</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-purple-400 transition-colors text-sm">Features</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-purple-400 transition-colors text-sm">Pricing</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-purple-400 transition-colors text-sm">API</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-purple-400 transition-colors text-sm">Integrations</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="text-sm font-semibold uppercase tracking-wider text-gray-300 mb-4">Resources</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-purple-400 transition-colors text-sm">Documentation</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-purple-400 transition-colors text-sm">Guides</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-purple-400 transition-colors text-sm">Blog</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-purple-400 transition-colors text-sm">Support</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="text-sm font-semibold uppercase tracking-wider text-gray-300 mb-4">Company</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-purple-400 transition-colors text-sm">About</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-purple-400 transition-colors text-sm">Careers</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-purple-400 transition-colors text-sm">Privacy</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-purple-400 transition-colors text-sm">Terms</a></li>
                    </ul>
                </div>
            </div>

            <div class="pt-8 border-t border-gray-800 flex flex-col md:flex-row justify-between items-center">
                <p class="text-gray-400 text-sm mb-4 md:mb-0">© 2023 Lectura AI. All rights reserved.</p>
                <div class="flex space-x-6">
                    <a href="#" class="text-gray-400 hover:text-purple-400 transition-colors">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-purple-400 transition-colors">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-purple-400 transition-colors">
                        <i class="fab fa-github"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-purple-400 transition-colors">
                        <i class="fab fa-discord"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>
</div>

<script>
    const { createApp, ref, computed, onMounted } = Vue;

    createApp({
        setup() {
            // State management
            const currentView = ref('dashboard');
            const isAuthenticated = ref(false);
            const showVideoForm = ref(true);
            const isDragging = ref(false);
            const selectedFile = ref(null);
            const isUploading = ref(false);
            const files = ref([]);
            const isLoadingFiles = ref(false);
            const isRefreshing = ref(false);
            const filterStatus = ref('all');
            const showSummaryModal = ref(false);
            const currentSummaryFile = ref(null);
            const isLoadingSummary = ref(false);

            // Form data
            const loginForm = ref({
                email: '',
                password: '',
                remember: false
            });

            const registerForm = ref({
                email: '',
                password: '',
                confirmPassword: '',
                agreeTerms: false
            });

            const isLoggingIn = ref(false);
            const isRegistering = ref(false);

            // File input ref
            const fileInput = ref(null);

            // Computed properties
            const filteredFiles = computed(() => {
                if (filterStatus.value === 'all') return files.value;
                return files.value.filter(file => file.status.toString() === filterStatus.value);
            });

            // Methods
            const triggerFileInput = () => {
                fileInput.value.click();
            };

            const handleFileSelect = (event) => {
                const file = event.target.files[0];
                if (file) {
                    selectedFile.value = file;
                }
            };

            const handleDrop = (event) => {
                isDragging.value = false;
                const file = event.dataTransfer.files[0];
                if (file) {
                    // Check if file is video or audio based on showVideoForm
                    const fileType = file.type.split('/')[0];
                    if ((showVideoForm.value && fileType === 'video') || (!showVideoForm.value && fileType === 'audio')) {
                        selectedFile.value = file;
                    } else {
                        alert(`Please upload a ${showVideoForm.value ? 'video' : 'audio'} file`);
                    }
                }
            };

            const removeFile = () => {
                selectedFile.value = null;
                if (fileInput.value) {
                    fileInput.value.value = '';
                }
            };

            const formatFileSize = (bytes) => {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            };

            const getFileIcon = (mimeType) => {
                const type = mimeType.split('/')[0];
                switch(type) {
                    case 'video':
                        return 'fa-video text-purple-400';
                    case 'audio':
                        return 'fa-microphone text-blue-400';
                    default:
                        return 'fa-file text-gray-400';
                }
            };

            const getFileType = (mimeType) => {
                const type = mimeType.split('/')[1];
                return type ? type.toUpperCase() : 'FILE';
            };

            const getStatusText = (status) => {
                switch(status) {
                    case 0:
                        return 'Uploaded';
                    case 1:
                        return 'Transcribed';
                    case 2:
                        return 'Summarized';
                    default:
                        return 'Unknown';
                }
            };

            // API methods
            const checkAuth = async () => {
                try {
                    // Verify token by making a request to the backend
                    await axios.get('/api/v1/verify-token');
                    isAuthenticated.value = true;
                    await fetchFiles();
                } catch (error) {
                    isAuthenticated.value = false;
                    if (currentView.value !== 'login' && currentView.value !== 'register') {
                        currentView.value = 'login';
                    }
                }
            };

            const getCookie = (name) => {
                const value = `; ${document.cookie}`;
                const parts = value.split(`; ${name}=`);
                if (parts.length === 2) return parts.pop().split(';').shift();
            };

            const handleLogin = async () => {
                isLoggingIn.value = true;
                try {
                    const response = await axios.postForm('/api/v1/login', {
                        email: loginForm.value.email,
                        password: loginForm.value.password
                    });

                    // The backend sets the cookie, no need to set it manually
                    isAuthenticated.value = true;
                    currentView.value = 'dashboard';
                    await fetchFiles();
                } catch (error) {
                    alert('Login failed. Please check your credentials and try again.');
                    console.error('Login error:', error);
                } finally {
                    isLoggingIn.value = false;
                }
            };

            const handleRegister = async () => {
                if (registerForm.value.password !== registerForm.value.confirmPassword) {
                    alert('Passwords do not match');
                    return;
                }

                isRegistering.value = true;
                try {
                    const response = await axios.postForm('/api/v1/register', {
                        email: registerForm.value.email,
                        password: registerForm.value.password
                    });

                    // The backend sets the cookie
                    isAuthenticated.value = true;
                    currentView.value = 'dashboard';
                    await fetchFiles();
                } catch (error) {
                    alert('Registration failed. Please try again.');
                    console.error('Registration error:', error);
                } finally {
                    isRegistering.value = false;
                }
            };

            const logout = async () => {
                try {
                    await axios.post('/api/v1/logout', null, { withCredentials: true });
                } catch (e) {
                    console.warn('Logout error:', e);
                }

                document.cookie = 'access_token=; Max-Age=0;'; // на всякий случай
                localStorage.removeItem('access_token');
                sessionStorage.removeItem('access_token');
                isAuthenticated.value = false;
                files.value = [];
                currentView.value = 'login';
            };


            const uploadFile = async () => {
                if (!selectedFile.value) return;

                isUploading.value = true;
                try {
                    const response = await axios.postForm('/api/v1/upload', {
                        file: selectedFile.value
                    });

                    // Add the new file to the beginning of the list
                    files.value.unshift(response.data);
                    selectedFile.value = null;
                    if (fileInput.value) {
                        fileInput.value.value = '';
                    }
                } catch (error) {
                    alert('File upload failed. Please try again.');
                    console.error('Upload error:', error);
                } finally {
                    isUploading.value = false;
                }
            };

            const fetchFiles = async () => {
                isLoadingFiles.value = true;
                try {
                    const response = await axios.get('/api/v1/files');
                    files.value = response.data;
                } catch (error) {
                    console.error('Error fetching files:', error);
                    alert('Failed to load files. Please try again.');
                } finally {
                    isLoadingFiles.value = false;
                }
            };

            const refreshFiles = async () => {
                isRefreshing.value = true;
                await fetchFiles();
                isRefreshing.value = false;
            };

            const viewSummary = (file) => {
                currentSummaryFile.value = file;
                showSummaryModal.value = true;
                isLoadingSummary.value = true;

                // Simulate loading summary
                setTimeout(() => {
                    isLoadingSummary.value = false;
                }, 1000);
            };

            const deleteFile = async (uuid) => {
                if (!confirm('Are you sure you want to delete this file?')) return;

                try {
                    // Simulate API call
                    await new Promise(resolve => setTimeout(resolve, 500));

                    // In a real app, this would be:
                    // await axios.delete(`/api/v1/files/${uuid}`);

                    files.value = files.value.filter(file => file.uuid !== uuid);
                } catch (error) {
                    console.error('Error deleting file:', error);
                    alert('Failed to delete file. Please try again.');
                }
            };

            // Lifecycle hooks
            onMounted(() => {
                checkAuth();

                // For demo purposes, simulate authenticated user
                // setTimeout(() => {
                //     isAuthenticated.value = true;
                //     fetchFiles();
                // }, 500);
            });

            return {
                currentView,
                isAuthenticated,
                showVideoForm,
                isDragging,
                selectedFile,
                isUploading,
                files,
                isLoadingFiles,
                isRefreshing,
                filterStatus,
                showSummaryModal,
                currentSummaryFile,
                isLoadingSummary,
                loginForm,
                registerForm,
                isLoggingIn,
                isRegistering,
                fileInput,
                filteredFiles,
                triggerFileInput,
                handleFileSelect,
                handleDrop,
                removeFile,
                formatFileSize,
                getFileIcon,
                getFileType,
                getStatusText,
                handleLogin,
                handleRegister,
                logout,
                uploadFile,
                fetchFiles,
                refreshFiles,
                viewSummary,
                deleteFile
            };
        }
    }).mount('#app');
</script>
</body>
</html>